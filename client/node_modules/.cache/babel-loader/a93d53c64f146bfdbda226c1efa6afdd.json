{"ast":null,"code":"import { userService } from '../_services';\nexport function handleResponse(response) {\n  return response.text().then(text => {\n    const data = text && JSON.parse(text);\n\n    if (!response.ok) {\n      if ([401, 403].indexOf(response.status) !== -1) {\n        userService.logout();\n        history.push('/login');\n      }\n\n      if ([422].indexOf(response.status) !== -1) {\n        userService.getRefreshToken().then(token => {\n          let str = localStorage.getItem('user');\n          let userData = JSON.parse(str);\n          userData.payload = token.payload;\n          localStorage.setItem('user', JSON.stringify(userData));\n          location.reload(true);\n        });\n      }\n\n      const error = data && data.message || response.statusText;\n      return Promise.reject(error);\n    }\n\n    return data;\n  });\n}","map":{"version":3,"sources":["/home/atiqul/docker-project/room-booking-app/client/src/_helpers/handle-response.js"],"names":["userService","handleResponse","response","text","then","data","JSON","parse","ok","indexOf","status","logout","history","push","getRefreshToken","token","str","localStorage","getItem","userData","payload","setItem","stringify","location","reload","error","message","statusText","Promise","reject"],"mappings":"AAAA,SAASA,WAAT,QAA4B,cAA5B;AAEA,OAAO,SAASC,cAAT,CAAwBC,QAAxB,EAAkC;AACrC,SAAOA,QAAQ,CAACC,IAAT,GAAgBC,IAAhB,CAAqBD,IAAI,IAAI;AAChC,UAAME,IAAI,GAAGF,IAAI,IAAIG,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAArB;;AAGA,QAAI,CAACD,QAAQ,CAACM,EAAd,EAAkB;AAEd,UAAI,CAAC,GAAD,EAAM,GAAN,EAAWC,OAAX,CAAmBP,QAAQ,CAACQ,MAA5B,MAAwC,CAAC,CAA7C,EAAgD;AAC5CV,QAAAA,WAAW,CAACW,MAAZ;AACAC,QAAAA,OAAO,CAACC,IAAR,CAAa,QAAb;AACH;;AAED,UAAI,CAAC,GAAD,EAAMJ,OAAN,CAAcP,QAAQ,CAACQ,MAAvB,MAAmC,CAAC,CAAxC,EAA2C;AACvCV,QAAAA,WAAW,CAACc,eAAZ,GAA8BV,IAA9B,CAAmCW,KAAK,IAAI;AACxC,cAAIC,GAAG,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAV;AACA,cAAIC,QAAQ,GAAGb,IAAI,CAACC,KAAL,CAAWS,GAAX,CAAf;AACAG,UAAAA,QAAQ,CAACC,OAAT,GAAmBL,KAAK,CAACK,OAAzB;AACAH,UAAAA,YAAY,CAACI,OAAb,CAAqB,MAArB,EAA6Bf,IAAI,CAACgB,SAAL,CAAeH,QAAf,CAA7B;AACAI,UAAAA,QAAQ,CAACC,MAAT,CAAgB,IAAhB;AACH,SAND;AAOH;;AACD,YAAMC,KAAK,GAAIpB,IAAI,IAAIA,IAAI,CAACqB,OAAd,IAA0BxB,QAAQ,CAACyB,UAAjD;AACA,aAAOC,OAAO,CAACC,MAAR,CAAeJ,KAAf,CAAP;AACH;;AAED,WAAOpB,IAAP;AACH,GAzBM,CAAP;AA0BH","sourcesContent":["import { userService } from '../_services';\n\nexport function handleResponse(response) {\n    return response.text().then(text => {\n        const data = text && JSON.parse(text);\n\n\n        if (!response.ok) {\n\n            if ([401, 403].indexOf(response.status) !== -1) {\n                userService.logout();\n                history.push('/login');\n            }\n\n            if ([422].indexOf(response.status) !== -1) {\n                userService.getRefreshToken().then(token => {\n                    let str = localStorage.getItem('user');\n                    let userData = JSON.parse(str);\n                    userData.payload = token.payload;\n                    localStorage.setItem('user', JSON.stringify(userData));\n                    location.reload(true);\n                });\n            }\n            const error = (data && data.message) || response.statusText;\n            return Promise.reject(error);\n        }\n\n        return data;\n    });\n}"]},"metadata":{},"sourceType":"module"}