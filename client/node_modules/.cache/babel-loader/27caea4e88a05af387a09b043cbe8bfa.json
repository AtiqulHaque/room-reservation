{"ast":null,"code":"var _jsxFileName = \"/home/atiqul/docker-project/room-booking-app/client/src/components/conversations/RecieverList.js\";\nimport React from 'react';\nimport { connect } from \"react-redux\";\nimport { conversation } from '../../_actions';\nimport { allSenders } from \"../../_actions/senders.action\";\nimport ProfilePicture from \"./ProfilePicture\";\nimport SenderInfo from \"./SenderInfo\";\nimport CountLabel from \"./CountLabel\";\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport axis from \"axis.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst mapStateToProps = state => ({\n  receivers: state.conversation,\n  allSenders: state.allSenders,\n  authentication: state.authentication\n});\n\nclass ReceiverList extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      active: null,\n      hasMore: true,\n      showDetails: false,\n      hideSideBar: false\n    };\n  }\n\n  componentDidMount() {\n    this.props.dispatch(allSenders.loadAllSenders(1));\n  }\n\n  handleShowDetails(e, senderId) {\n    this.toggleActiveItem(e.target);\n    this.props.dispatch(conversation.loadAllSenderConversations(senderId));\n\n    if (window.innerWidth < 768) {\n      this.props.dispatch(conversation.showDetails());\n    }\n  }\n\n  handleOnScroll() {\n    const nextPage = this.props.allSenders.page + 1;\n    const searchKeyWord = this.props.searchRef.current.value;\n\n    if (searchKeyWord.length) {\n      this.props.dispatch(allSenders.searchSenders(searchKeyWord, nextPage));\n    } else {\n      this.props.dispatch(allSenders.loadMoreSenders(nextPage));\n    }\n\n    if (typeof this.props.allSenders.meta !== 'undefined') {\n      if (this.props.allSenders.data.length === this.props.allSenders.meta.pagination.total) {\n        this.setState({\n          hasMore: false\n        });\n      }\n    }\n  }\n\n  toggleActiveItem(node) {\n    const parentLi = node.closest('.conversation-user-list-item');\n    const siblings = parentLi.parentNode.children;\n\n    for (let el of siblings) {\n      el.classList.remove('active');\n    }\n\n    parentLi.classList.add('active');\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"box-body no-padding\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `conversation-user-list ${!axis.isUndefined(this.props.allSenders.search_loading) && this.props.allSenders.search_loading ? 'is-loading' : ''}`,\n        children: /*#__PURE__*/_jsxDEV(InfiniteScroll, {\n          dataLength: this.props.allSenders.data.length //This is important field to render the next data\n          ,\n          next: e => this.handleOnScroll(),\n          hasMore: this.state.hasMore,\n          loader: /*#__PURE__*/_jsxDEV(\"h4\", {\n            style: {\n              textAlign: 'center',\n              fontSize: '16px',\n              fontWeight: 700\n            },\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 33\n          }, this),\n          endMessage: /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              textAlign: 'center'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"No more contacts\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 29\n          }, this),\n          height: 400,\n          children: this.props.allSenders.data.map((each, index) => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"conversation-user-list-item\",\n              children: /*#__PURE__*/_jsxDEV(\"a\", {\n                onClick: e => this.handleShowDetails(e, each.sender.data.user_id),\n                href: \"#\",\n                className: \"conversation-user-list-item-inner\",\n                children: [/*#__PURE__*/_jsxDEV(ProfilePicture, {\n                  user: each.sender.data\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 87,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(SenderInfo, {\n                  user: each.sender.data,\n                  senderType: each.sender_type\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 88,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"meta\",\n                  children: [/*#__PURE__*/_jsxDEV(CountLabel, {\n                    cssClasses: \"has-new label bg-yellow\",\n                    prefix: \"New\",\n                    count: each.all_new_conversation_count\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 90,\n                    columnNumber: 36\n                  }, this), /*#__PURE__*/_jsxDEV(CountLabel, {\n                    cssClasses: \"count label bg-gray\",\n                    count: each.all_conversation_count\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 92,\n                    columnNumber: 36\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 33\n              }, this)\n            }, `key-${index}`, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 36\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst List = connect(mapStateToProps)(ReceiverList);\nexport { List as ListOfUsers };","map":{"version":3,"sources":["/home/atiqul/docker-project/room-booking-app/client/src/components/conversations/RecieverList.js"],"names":["React","connect","conversation","allSenders","ProfilePicture","SenderInfo","CountLabel","InfiniteScroll","axis","mapStateToProps","state","receivers","authentication","ReceiverList","Component","constructor","props","active","hasMore","showDetails","hideSideBar","componentDidMount","dispatch","loadAllSenders","handleShowDetails","e","senderId","toggleActiveItem","target","loadAllSenderConversations","window","innerWidth","handleOnScroll","nextPage","page","searchKeyWord","searchRef","current","value","length","searchSenders","loadMoreSenders","meta","data","pagination","total","setState","node","parentLi","closest","siblings","parentNode","children","el","classList","remove","add","render","isUndefined","search_loading","textAlign","fontSize","fontWeight","map","each","index","sender","user_id","sender_type","all_new_conversation_count","all_conversation_count","List","ListOfUsers"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {connect} from \"react-redux\";\nimport {conversation} from '../../_actions';\nimport {allSenders} from \"../../_actions/senders.action\";\nimport ProfilePicture from \"./ProfilePicture\";\nimport SenderInfo from \"./SenderInfo\";\nimport CountLabel from \"./CountLabel\";\nimport InfiniteScroll from 'react-infinite-scroll-component';\nimport axis from \"axis.js\";\n\n\nconst mapStateToProps = state => ({\n    receivers: state.conversation,\n    allSenders: state.allSenders,\n    authentication: state.authentication\n});\n\nclass ReceiverList extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            active: null,\n            hasMore: true,\n            showDetails: false,\n            hideSideBar: false\n        };\n    }\n\n    componentDidMount() {\n        this.props.dispatch(allSenders.loadAllSenders(1));\n    }\n\n    handleShowDetails(e, senderId) {\n        this.toggleActiveItem(e.target);\n        this.props.dispatch(conversation.loadAllSenderConversations(senderId));\n        if(window.innerWidth < 768){\n            this.props.dispatch(conversation.showDetails());\n        }\n    }\n\n    handleOnScroll() {\n        const nextPage = this.props.allSenders.page + 1;\n        const searchKeyWord = this.props.searchRef.current.value;\n        if(searchKeyWord.length){\n            this.props.dispatch(allSenders.searchSenders(searchKeyWord,nextPage));\n        }else{\n            this.props.dispatch(allSenders.loadMoreSenders(nextPage));\n        }\n\n        if (typeof this.props.allSenders.meta !== 'undefined') {\n            if (this.props.allSenders.data.length === this.props.allSenders.meta.pagination.total) {\n                this.setState({\n                    hasMore: false\n                });\n            }\n        }\n    }\n\n    toggleActiveItem(node) {\n        const parentLi = node.closest('.conversation-user-list-item');\n        const siblings = parentLi.parentNode.children;\n        for (let el of siblings) {\n            el.classList.remove('active');\n        }\n        parentLi.classList.add('active');\n    }\n\n    render() {\n        return (\n            <div className=\"box-body no-padding\">\n                <div className={`conversation-user-list ${!axis.isUndefined(this.props.allSenders.search_loading) && this.props.allSenders.search_loading ? 'is-loading' : ''}`}>\n                    <InfiniteScroll\n                        dataLength={this.props.allSenders.data.length} //This is important field to render the next data\n                        next={(e) => this.handleOnScroll()}\n                        hasMore={this.state.hasMore}\n                        loader={<h4 style={{textAlign: 'center', fontSize: '16px', fontWeight: 700}}>Loading...</h4>}\n                        endMessage={\n                            <p style={{textAlign: 'center'}}>\n                                <b>No more contacts</b>\n                            </p>\n                        }\n                        height={400}\n                    >\n                        {this.props.allSenders.data.map((each, index) => {\n                            return <div className=\"conversation-user-list-item\" key={`key-${index}`}>\n                                <a onClick={(e) => this.handleShowDetails(e, each.sender.data.user_id)} href=\"#\" className={\"conversation-user-list-item-inner\"}>\n                                    <ProfilePicture user={each.sender.data}/>\n                                    <SenderInfo user={each.sender.data} senderType={each.sender_type}/>\n                                    <span className={\"meta\"}>\n                                   <CountLabel cssClasses={\"has-new label bg-yellow\"} prefix={\"New\"}\n                                               count={each.all_new_conversation_count}/>\n                                   <CountLabel cssClasses={\"count label bg-gray\"} count={each.all_conversation_count}/>\n                                </span>\n                                </a>\n                            </div>\n                        })}\n                    </InfiniteScroll>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst List = connect(mapStateToProps)(ReceiverList);\nexport {List as ListOfUsers};\n"]},"metadata":{},"sourceType":"module"}