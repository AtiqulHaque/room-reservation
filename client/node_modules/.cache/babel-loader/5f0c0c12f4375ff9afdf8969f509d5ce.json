{"ast":null,"code":"var _jsxFileName = \"/home/atiqul/docker-project/room-booking-app/client/src/components/Family.js\";\nimport React from 'react';\nimport { connect } from \"react-redux\";\nimport axis from \"axis.js\";\nimport { conversation, userActions, contactActions } from \"../_actions\";\nimport Pagination from \"react-js-pagination\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet _queryTimeout = null;\n\nclass Family extends React.Component {\n  constructor(props) {\n    super(props);\n    this.searchUserRef = /*#__PURE__*/React.createRef();\n  }\n\n  componentDidMount() {\n    this.props.dispatch(userActions.getFamilies(1, ''));\n  }\n\n  handleSearch(e) {\n    e.preventDefault();\n\n    if (axis.isUndefined(this.searchUserRef) || !this.searchUserRef.current.value.length) {\n      this.props.dispatch(userActions.getFamilies(1, ''));\n      return;\n    }\n\n    const searchKeyWord = this.searchUserRef.current.value;\n\n    if (_queryTimeout) {\n      window.clearTimeout(_queryTimeout);\n    }\n\n    _queryTimeout = window.setTimeout(function () {\n      this.props.dispatch(userActions.getFamilies(1, searchKeyWord));\n    }.bind(this, searchKeyWord), 400);\n  }\n\n  handlePageChange(pageNumber) {\n    const searchKeyWord = this.searchUserRef.current.value;\n    this.props.dispatch(userActions.getAupairs(pageNumber, searchKeyWord));\n  }\n\n  getPagination() {\n    if (!axis.isUndefined(this.props.users.meta.pagination) && this.props.users.meta.pagination.total_pages > 1) {\n      return /*#__PURE__*/_jsxDEV(Pagination, {\n        activePage: this.props.users.meta.pagination.current_page,\n        itemsCountPerPage: this.props.users.meta.pagination.per_page,\n        totalItemsCount: this.props.users.meta.pagination.total,\n        pageRangeDisplayed: 5,\n        onChange: this.handlePageChange.bind(this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 20\n      }, this);\n    }\n\n    return '';\n  }\n\n  getPicture(path) {\n    return /*#__PURE__*/_jsxDEV(\"img\", {\n      src: path,\n      alt: \"user pic\",\n      className: \"img-circle\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 16\n    }, this);\n  }\n\n  getNoImage(firstName) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"no-image\",\n      children: firstName.charAt(0)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 16\n    }, this);\n  }\n\n  handleSendMessage(e, user) {\n    e.preventDefault();\n    this.props.dispatch(conversation.showComposeModal(true, {\n      first_name: user.first_name,\n      sur_name: user.sur_name,\n      user_id: user.user_id\n    }));\n  }\n\n  addUserToConversation(e, user) {\n    e.preventDefault();\n    this.props.dispatch(contactActions.addContact(user.user_id, 2, () => {\n      this.props.dispatch(userActions.getAupairs(this.props.users.meta.pagination.current_page, ''));\n    }));\n  }\n\n  shoMessageButton(authUser, admin, user) {\n    if (axis.isUndefined(authUser)) {\n      return \"\";\n    }\n\n    if (axis.isUndefined(admin)) {\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn btn-sm btn-primary\",\n        onClick: e => this.addUserToConversation(e, user),\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fa fa-plus\",\n          \"aria-hidden\": \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 125\n        }, this), \" Add this user \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this);\n    }\n\n    if (axis.isUndefined(admin) || authUser.id !== admin.data.member_id) {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"label label-danger\",\n        children: \"Already Connected\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"button\",\n      className: \"btn btn-sm btn-info\",\n      onClick: e => this.handleSendMessage(e, user),\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fa fa-paper-plane-o\",\n        \"aria-hidden\": \"true\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 113\n      }, this), \" Send Message \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this);\n  }\n\n  render() {\n    let auth = JSON.parse(localStorage.getItem('user'));\n    return /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"content settings\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-xs-12\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"box user-data-list\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"box-header with-border\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"title\",\n                  children: /*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"box-title\",\n                    children: \"Host Family\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 106,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"action\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group\",\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      className: \"form-control\",\n                      type: \"text\",\n                      placeholder: \"Search family...\",\n                      onChange: e => this.handleSearch(e),\n                      ref: this.searchUserRef\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 110,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 109,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 108,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"box-body\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `table-holder table-responsive ${!axis.isUndefined(this.props.users.loading) && this.props.users.loading ? 'is-loading' : ''}`,\n                  children: /*#__PURE__*/_jsxDEV(\"table\", {\n                    className: \"table table-bordered table-hover\",\n                    children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                      children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Name\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 119,\n                          columnNumber: 49\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Email\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 120,\n                          columnNumber: 49\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Nationality\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 121,\n                          columnNumber: 49\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Registration Date\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 122,\n                          columnNumber: 49\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Last login\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 123,\n                          columnNumber: 49\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Agent\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 124,\n                          columnNumber: 49\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Action\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 125,\n                          columnNumber: 49\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 118,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 117,\n                      columnNumber: 45\n                    }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                      children: this.props.users.items.map((each, index) => {\n                        return /*#__PURE__*/_jsxDEV(\"tr\", {\n                          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                            children: /*#__PURE__*/_jsxDEV(\"div\", {\n                              className: \"user\",\n                              children: [!axis.isUndefined(each.picture) ? this.getPicture(each.picture.data.file) : this.getNoImage(each.first_name), /*#__PURE__*/_jsxDEV(\"span\", {\n                                className: \"name\",\n                                children: [\" \", each.first_name, \" \", each.sur_name]\n                              }, void 0, true, {\n                                fileName: _jsxFileName,\n                                lineNumber: 134,\n                                columnNumber: 61\n                              }, this)]\n                            }, void 0, true, {\n                              fileName: _jsxFileName,\n                              lineNumber: 132,\n                              columnNumber: 57\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 131,\n                            columnNumber: 53\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: each.email\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 137,\n                            columnNumber: 53\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: !axis.isUndefined(each.logistic) && !axis.isUndefined(each.logistic.data.nationality) ? each.logistic.data.nationality.data.name : 'N/A'\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 138,\n                            columnNumber: 53\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: !axis.isUndefined(each.registration_date) ? each.registration_date : 'N/A'\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 139,\n                            columnNumber: 53\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: /*#__PURE__*/_jsxDEV(\"span\", {\n                              className: \"label bg-green\",\n                              children: !axis.isUndefined(each.last_login) ? each.last_login : 'N/A'\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 141,\n                              columnNumber: 57\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 140,\n                            columnNumber: 53\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: !axis.isUndefined(each.admin) && !axis.isUndefined(each.admin.data.adminMember.data) ? each.admin.data.adminMember.data.first_name + ' ' + each.admin.data.adminMember.data.last_name : 'N/A'\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 144,\n                            columnNumber: 53\n                          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                            children: this.shoMessageButton(auth.payload.user, each.admin, each)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 145,\n                            columnNumber: 53\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 130,\n                          columnNumber: 56\n                        }, this);\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 128,\n                      columnNumber: 45\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 116,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"box-footer clearfix\",\n                children: this.getPagination()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => state;\n\nexport default connect(mapStateToProps)(Family);","map":{"version":3,"sources":["/home/atiqul/docker-project/room-booking-app/client/src/components/Family.js"],"names":["React","connect","axis","conversation","userActions","contactActions","Pagination","_queryTimeout","Family","Component","constructor","props","searchUserRef","createRef","componentDidMount","dispatch","getFamilies","handleSearch","e","preventDefault","isUndefined","current","value","length","searchKeyWord","window","clearTimeout","setTimeout","bind","handlePageChange","pageNumber","getAupairs","getPagination","users","meta","pagination","total_pages","current_page","per_page","total","getPicture","path","getNoImage","firstName","charAt","handleSendMessage","user","showComposeModal","first_name","sur_name","user_id","addUserToConversation","addContact","shoMessageButton","authUser","admin","id","data","member_id","render","auth","JSON","parse","localStorage","getItem","loading","items","map","each","index","picture","file","email","logistic","nationality","name","registration_date","last_login","adminMember","last_name","payload","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {connect} from \"react-redux\";\nimport axis from \"axis.js\";\nimport {conversation, userActions, contactActions} from \"../_actions\";\nimport Pagination from \"react-js-pagination\";\n\nlet _queryTimeout = null;\nclass Family extends React.Component {\n    constructor(props) {\n        super(props);\n        this.searchUserRef = React.createRef();\n    }\n    componentDidMount() {\n        this.props.dispatch(userActions.getFamilies(1,''));\n    }\n    handleSearch(e){\n        e.preventDefault();\n        if(axis.isUndefined(this.searchUserRef) ||  !this.searchUserRef.current.value.length){\n            this.props.dispatch(userActions.getFamilies(1, ''));\n            return;\n        }\n\n        const searchKeyWord = this.searchUserRef.current.value;\n\n        if (_queryTimeout) {\n            window.clearTimeout(_queryTimeout);\n        }\n\n        _queryTimeout = window.setTimeout(function(){\n            this.props.dispatch(userActions.getFamilies(1,searchKeyWord));\n        }.bind(this,searchKeyWord),400);\n    }\n    handlePageChange(pageNumber) {\n        const searchKeyWord = this.searchUserRef.current.value;\n        this.props.dispatch(userActions.getAupairs(pageNumber, searchKeyWord));\n    }\n    getPagination(){\n        if(!axis.isUndefined(this.props.users.meta.pagination) && this.props.users.meta.pagination.total_pages > 1){\n            return <Pagination\n                activePage={this.props.users.meta.pagination.current_page}\n                itemsCountPerPage={this.props.users.meta.pagination.per_page}\n                totalItemsCount={this.props.users.meta.pagination.total}\n                pageRangeDisplayed={5}\n                onChange={this.handlePageChange.bind(this)}\n            />;\n        }\n        return '';\n    }\n    getPicture(path){\n        return <img src={path} alt=\"user pic\" className=\"img-circle\"/>;\n    }\n    getNoImage(firstName){\n        return <p className=\"no-image\">{firstName.charAt(0)}</p>;\n    }\n    handleSendMessage(e, user){\n        e.preventDefault();\n        this.props.dispatch(conversation.showComposeModal(true,{\n            first_name: user.first_name,\n            sur_name: user.sur_name,\n            user_id: user.user_id\n        }));\n    }\n\n    addUserToConversation(e,user){\n        e.preventDefault();\n        this.props.dispatch(contactActions.addContact(user.user_id,2,()=>{\n            this.props.dispatch(userActions.getAupairs(this.props.users.meta.pagination.current_page,''));\n        }));\n    }\n\n    shoMessageButton(authUser, admin, user) {\n        if(axis.isUndefined(authUser)){\n            return (\n                \"\"\n            );\n        }\n\n        if(axis.isUndefined(admin)){\n            return (\n                <button type=\"button\" className=\"btn btn-sm btn-primary\" onClick={e => this.addUserToConversation(e, user)}><i  className=\"fa fa-plus\" aria-hidden=\"true\"/> Add this user </button>\n            );\n        }\n\n        if(axis.isUndefined(admin) || authUser.id !== admin.data.member_id){\n            return (\n                <span className={\"label label-danger\"}>Already Connected</span>\n            );\n        }\n\n        return (\n            <button type=\"button\" className=\"btn btn-sm btn-info\" onClick={e => this.handleSendMessage(e,user)}><i  className=\"fa fa-paper-plane-o\" aria-hidden=\"true\"/> Send Message </button>\n        );\n    }\n\n    render() {\n        let auth = JSON.parse(localStorage.getItem('user'));\n\n        return (\n            <section className=\"content settings\">\n                <div className=\"container\">\n                    <div className=\"row\">\n                        <div className=\"col-xs-12\">\n                            <div className=\"box user-data-list\">\n                                <div className=\"box-header with-border\">\n                                    <div className=\"title\">\n                                        <h3 className=\"box-title\">Host Family</h3>\n                                    </div>\n                                    <div className=\"action\">\n                                        <div className=\"form-group\">\n                                            <input className={\"form-control\"} type=\"text\" placeholder={\"Search family...\"} onChange={(e)=>this.handleSearch(e)} ref={this.searchUserRef}/>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div className=\"box-body\">\n                                    <div className={`table-holder table-responsive ${!axis.isUndefined(this.props.users.loading) && this.props.users.loading ? 'is-loading' : ''}`}>\n                                        <table className=\"table table-bordered table-hover\">\n                                            <thead>\n                                            <tr>\n                                                <th>Name</th>\n                                                <th>Email</th>\n                                                <th>Nationality</th>\n                                                <th>Registration Date</th>\n                                                <th>Last login</th>\n                                                <th>Agent</th>\n                                                <th>Action</th>\n                                            </tr>\n                                            </thead>\n                                            <tbody>\n                                            {this.props.users.items.map((each, index) => {\n                                                return <tr>\n                                                    <td>\n                                                        <div className=\"user\">\n                                                            {!axis.isUndefined(each.picture) ? this.getPicture(each.picture.data.file) : this.getNoImage(each.first_name)}\n                                                            <span className=\"name\"> {each.first_name} {each.sur_name}</span>\n                                                        </div>\n                                                    </td>\n                                                    <td>{each.email}</td>\n                                                    <td>{!axis.isUndefined(each.logistic)  && !axis.isUndefined(each.logistic.data.nationality) ? each.logistic.data.nationality.data.name : 'N/A'}</td>\n                                                    <td>{!axis.isUndefined(each.registration_date) ? each.registration_date : 'N/A'}</td>\n                                                    <td>\n                                                        <span className={\"label bg-green\"}>{!axis.isUndefined(each.last_login) ? each.last_login : 'N/A'}</span>\n                                                    </td>\n\n                                                    <td>{!axis.isUndefined(each.admin) && !axis.isUndefined(each.admin.data.adminMember.data) ? each.admin.data.adminMember.data.first_name + ' ' + each.admin.data.adminMember.data.last_name : 'N/A'}</td>\n                                                    <td>\n                                                        {this.shoMessageButton(auth.payload.user, each.admin, each)}\n                                                    </td>\n                                                </tr>\n                                            })}\n                                            </tbody>\n                                        </table>\n                                    </div>\n                                </div>\n                                <div className=\"box-footer clearfix\">\n                                    {this.getPagination()}\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </section>\n        );\n    }\n}\n\nconst mapStateToProps = state => state;\nexport default connect(mapStateToProps)(Family);"]},"metadata":{},"sourceType":"module"}