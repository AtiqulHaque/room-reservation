{"ast":null,"code":"import { BookingConstants } from '../_constants';\nexport const booking = {\n  loadDashboard,\n  bookRoom,\n  checkAvailable,\n  setMessage\n};\nconst BASE_URL = \"http://localhost:8000/api/\";\n\nfunction handleResponse(response) {\n  return response.text().then(text => {\n    const data = text && JSON.parse(text);\n\n    if (!response.ok) {\n      if ([401, 403, 500].indexOf(response.status) !== -1) {} //   return Promise.reject(error);\n\n    }\n\n    return data;\n  });\n}\n\nconst getBookingListSuccess = lists => ({\n  type: BookingConstants.BOOKING_LIST_SUCCESS,\n  payload: lists\n});\n\nconst bookSuccess = (isAvailable, buttonText) => ({\n  type: BookingConstants.BOOKING_SUBMIT_SUCCESS,\n  payload: {\n    isAvailable,\n    buttonText\n  }\n});\n\nconst checkAvailableSuccess = (isAvailable, buttonText, message) => ({\n  type: BookingConstants.AVAILABLE_SUCCESS,\n  payload: {\n    isAvailable,\n    buttonText,\n    message\n  }\n});\n\nconst checkAvailableLodaing = buttonText => ({\n  type: BookingConstants.AVAILABLE_LOADING,\n  payload: {\n    buttonText\n  }\n});\n\nfunction loadDashboard() {\n  return dispatch => {\n    fetch(BASE_URL + \"booking/list\").then(response => response.json()).then(data => {\n      dispatch(getBookingListSuccess(data.payload));\n    });\n  };\n}\n\nfunction setMessage(msg) {\n  return dispatch => {\n    dispatch(getBookingListSuccess(msg));\n  };\n}\n\nfunction bookRoom(params) {\n  const requestOptions = {\n    method: 'POST',\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"X-Requested-With\": \"XMLHttpRequest\",\n      Accept: 'application/json'\n    },\n    body: JSON.stringify({\n      first_name: params.firstname,\n      last_name: params.lastname,\n      email: params.email,\n      reservation_date: params.reservation_date\n    })\n  };\n  return dispatch => {\n    fetch(BASE_URL + \"book/room\", requestOptions).then(response => {\n      return response.text().then(text => {\n        const data = text && JSON.parse(text);\n\n        if (!response.ok) {\n          const error = data && data.message || response.statusText;\n          return Promise.reject(error);\n        }\n\n        dispatch(bookSuccess(false, \"Check Available\"));\n      });\n    });\n  };\n}\n\nfunction checkAvailable(params) {\n  const requestOptions = {\n    method: 'POST',\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"X-Requested-With\": \"XMLHttpRequest\",\n      Accept: 'application/json'\n    },\n    body: JSON.stringify({\n      reservation_date: params.reservation_date\n    })\n  };\n  return dispatch => {\n    dispatch(checkAvailableLodaing(\"Checking...\"));\n    fetch(BASE_URL + \"check/room-available\", requestOptions).then(response => {\n      return response.text().then(text => {\n        const data = text && JSON.parse(text);\n\n        if (!response.ok) {\n          const error = data && data.message || response.statusText;\n          return Promise.reject(error);\n        }\n\n        let isAvailable = data.payload === 'free';\n        let buttonText = isAvailable ? \"Book Now\" : \"Check Available\";\n        let message = isAvailable ? \"Yes you can Book Now\" : \"Already Booked\";\n        dispatch(checkAvailableSuccess(isAvailable, buttonText, message));\n      });\n    });\n  };\n}","map":{"version":3,"sources":["/home/atiqul/docker-project/room-booking-app/client/src/_actions/booking.actions.js"],"names":["BookingConstants","booking","loadDashboard","bookRoom","checkAvailable","setMessage","BASE_URL","handleResponse","response","text","then","data","JSON","parse","ok","indexOf","status","getBookingListSuccess","lists","type","BOOKING_LIST_SUCCESS","payload","bookSuccess","isAvailable","buttonText","BOOKING_SUBMIT_SUCCESS","checkAvailableSuccess","message","AVAILABLE_SUCCESS","checkAvailableLodaing","AVAILABLE_LOADING","dispatch","fetch","json","msg","params","requestOptions","method","headers","Accept","body","stringify","first_name","firstname","last_name","lastname","email","reservation_date","error","statusText","Promise","reject"],"mappings":"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","sourcesContent":["import { BookingConstants } from '../_constants';\n\nexport const booking = {\n    loadDashboard,\n    bookRoom,\n    checkAvailable,\n    setMessage\n};\n\nconst BASE_URL = \"http://localhost:8000/api/\";\n\n\nfunction handleResponse(response) {\n    return response.text().then(text => {\n        const data = text && JSON.parse(text);\n\n\n        if (!response.ok) {\n\n            if ([401, 403, 500].indexOf(response.status) !== -1) {\n\n            }\n\n         //   return Promise.reject(error);\n        }\n\n        return data;\n    });\n}\n\n\nconst getBookingListSuccess = lists => ({\n    type: BookingConstants.BOOKING_LIST_SUCCESS,\n    payload: lists,\n});\n\n\nconst bookSuccess = (isAvailable, buttonText) => ({\n    type: BookingConstants.BOOKING_SUBMIT_SUCCESS,\n    payload: {isAvailable, buttonText},\n});\nconst checkAvailableSuccess = (isAvailable, buttonText, message) => ({\n    type: BookingConstants.AVAILABLE_SUCCESS,\n    payload: {isAvailable, buttonText, message},\n});\n\n\nconst checkAvailableLodaing = (buttonText) => ({\n    type: BookingConstants.AVAILABLE_LOADING,\n    payload: {buttonText},\n});\n\nfunction loadDashboard() {\n    return dispatch => {\n        fetch(BASE_URL + \"booking/list\")\n            .then(response => response.json())\n            .then(data => {\n                dispatch(getBookingListSuccess(data.payload));\n            });\n    };\n}\n\nfunction setMessage(msg) {\n    return dispatch => {\n        dispatch(getBookingListSuccess(msg));\n    };\n}\n\nfunction bookRoom(params) {\n\n    const requestOptions = {\n        method: 'POST',\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"X-Requested-With\": \"XMLHttpRequest\",\n            Accept: 'application/json'\n        },\n        body: JSON.stringify({\n            first_name: params.firstname,\n            last_name: params.lastname,\n            email: params.email,\n            reservation_date: params.reservation_date,\n        })\n    };\n\n\n    return dispatch => {\n        fetch(BASE_URL + \"book/room\", requestOptions)\n            .then(response => {\n                return response.text().then(text => {\n                    const data = text && JSON.parse(text);\n\n                    if (!response.ok) {\n                        const error = (data && data.message) || response.statusText;\n                        return Promise.reject(error);\n                    }\n\n                    dispatch(bookSuccess(false, \"Check Available\"));\n                });\n            });\n    };\n}\n\nfunction checkAvailable(params) {\n\n    const requestOptions = {\n        method: 'POST',\n        headers: {\n            \"Content-Type\": \"application/json\",\n            \"X-Requested-With\": \"XMLHttpRequest\",\n            Accept: 'application/json'\n        },\n        body: JSON.stringify({\n            reservation_date: params.reservation_date,\n        })\n    };\n\n\n\n    return dispatch => {\n\n        dispatch(checkAvailableLodaing(\"Checking...\"));\n\n        fetch(BASE_URL + \"check/room-available\", requestOptions)\n            .then(response => {\n                return response.text().then(text => {\n                    const data = text && JSON.parse(text);\n\n                    if (!response.ok) {\n                        const error = (data && data.message) || response.statusText;\n                        return Promise.reject(error);\n                    }\n\n                    let isAvailable = (data.payload === 'free');\n\n                    let buttonText = (isAvailable) ? \"Book Now\" : \"Check Available\";\n                    let message = (isAvailable) ? \"Yes you can Book Now\" : \"Already Booked\";\n\n                    dispatch(checkAvailableSuccess(isAvailable, buttonText, message));\n                });\n            });\n    };\n}\n"]},"metadata":{},"sourceType":"module"}